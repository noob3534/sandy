<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Traffic Management</title>
  
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #292020, #4d8a81, #6a4747);
      color: #e6edf3;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .card {
      width: 100%;
      max-width: 700px;
      background: rgba(236, 225, 225, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 8px 24px rgba(154, 144, 144, 0.6);
      backdrop-filter: blur(6px);
    }
    h1,h2 { margin-top:0; color:#fff; }
    input {
      margin: 6px 0;
      padding: 10px;
      width: 90%;
      border-radius: 6px;
      border: 1px solid #f4eded;
      background: rgba(3, 3, 3, 0.1);
      color: #fffffc;
    }
    .btn {
      margin: 6px;
      padding: 10px 16px;
      border-radius: 8px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      background: #2563eb;
      color: white;
      transition: transform 0.2s;
    }
    .btn:hover { transform: scale(1.05); }
    .hidden { display:none; }
    .msg { margin-top: 10px; padding: 8px; border-radius: 6px; }
    .ok { background:#00000044; color:#f3f7f4; }
    .err { background:#e40c0c44; color:#dc2626; }
  </style>
</head>
<body>
  <div class="card">
    <!-- Home Screen -->
    <div id="homeScreen">
      <h1>üö¶ Smart Traffic Management</h1>
      <h2>Select Role</h2>
      <button class="btn" onclick="goToScreen('adminLogin')">User Login</button>
      <button class="btn" onclick="goToScreen('gpsScreen')">üìç Live GPS</button>
    </div>

    <!-- Admin Login -->
    <div id="adminLogin" class="hidden">
      <h2>User Login</h2>
      <input id="email" type="email" placeholder="User email" /><br>
      <input id="pwd" type="password" placeholder="Password" /><br>
      <button class="btn" onclick="adminLogin()">Login</button>
      <button class="btn" onclick="goToScreen('homeScreen')">Back</button>
      <div id="loginMsg" class="msg"></div>
    </div>

    <!-- Task Selection -->
    <div id="taskScreen" class="hidden">
      <h2>Select Feature</h2>
      <button class="btn" onclick="doTask('View Traffic')">View Traffic</button>
      <button class="btn" onclick="doTask('Report Incident')">Report Incident</button>
      
      <!-- ‚úÖ New Demo Button -->
      <button class="btn" onclick="goToScreen('demoScreen')">üé¨ Demo</button>

      <button class="btn" onclick="goToScreen('homeScreen')">Logout</button>

      
    </div>

    <!-- Result Screen -->
    <div id="resultScreen" class="hidden">
      <h2>Result</h2>
      <div id="resultMsg" class="msg ok"></div>
      <p>Satisfied?</p>
      <button class="btn" onclick="goToScreen('homeScreen')">Yes ‚Üí Exit</button>
      <button class="btn" onclick="goToScreen('taskScreen')">No ‚Üí Retry</button>
    </div>

    <!-- GPS Location -->
    <div id="gpsScreen" class="hidden">
      <h2>üìç Live Location</h2>
      <p id="gpsOutput">Fetching location...</p>
      <button class="btn" onclick="getLocation()">Update GPS</button>
      <button class="btn" onclick="goToScreen('homeScreen')">Back</button>
    </div>

    <!-- üé¨ Demo Video Screen -->
    <div id="demoScreen" class="hidden">
      <h2>üé¨ Demo Video</h2>
      <center>
      <video width="600" controls>
        <source src="demo.mp4" type="video/mp4">
      </center>
        This is the demo video.
      </video>
      <br>
      <button class="btn" onclick="goToScreen('taskScreen')">Back</button>
    </div>
   
  </div>

  <script>
    // Demo Users
    const ADMINS = { "ram123@gmail.com": "RAM123" };

    let currentScreen = "homeScreen";

    function goToScreen(id){
      document.getElementById(currentScreen).classList.add("hidden");
      document.getElementById(id).classList.remove("hidden");
      currentScreen = id;
      if(id==="gpsScreen") getLocation();
    }

    // Admin login
    function adminLogin(){
      const email = document.getElementById("email").value.trim();
      const pwd = document.getElementById("pwd").value.trim();
      const msg = document.getElementById("loginMsg");
      if(ADMINS[email]===pwd){
        msg.textContent="‚úÖ Login success!";
        msg.className="msg ok";
        setTimeout(()=>goToScreen("taskScreen"),1000);
      }else{
        msg.textContent="‚ùå Invalid credentials!";
        msg.className="msg err";
      }
    }

    // Tasks
    function doTask(task){
      let result = "";
      if(task==="View Traffic"){
        result = "Traffic congestion moderate near City Center üöó";
      } else if(task==="Report Incident"){
        result = "Incident reported successfully ‚ö†Ô∏è";
      } else if(task==="Check Parking"){
        result = "10 parking spots available üÖøÔ∏è";
      }
      document.getElementById("resultMsg").textContent=result;
      goToScreen("resultScreen");
    }

    // GPS
    function getLocation(){
      const out=document.getElementById("gpsOutput");
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(pos=>{
          out.textContent=`Lat: ${pos.coords.latitude.toFixed(4)}, Lng: ${pos.coords.longitude.toFixed(4)}`;
        }, err=>{
          out.textContent="‚ùå Location access denied.";
        });
      }else{
        out.textContent="‚ùå Geolocation not supported.";
      }
    }
  </script>
</body>
</html>
